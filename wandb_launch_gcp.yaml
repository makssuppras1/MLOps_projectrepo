# WandB Launch Configuration for GCP
# Use this with: wandb launch src/pname/train.py --config wandb_launch_gcp.yaml

resource: gcp-gke  # Options: gcp-gke, gcp-vertex

# GCP Configuration
resource_args:
  project: phrasal-clover-484309-b8  # Your current GCP project (update if needed)
  region: us-central1  # Or us-east1, europe-west1, etc.
  zone: us-central1-a  # Required for GKE

  # Machine configuration
  machine_type: n1-standard-4  # 4 vCPUs, 15GB RAM
  # Alternatives:
  # - n1-standard-8 (8 vCPUs, 30GB RAM)
  # - n1-highmem-4 (4 vCPUs, 26GB RAM) - for larger models

  # GPU configuration (optional but recommended for training)
  accelerator_type: NVIDIA_TESLA_T4
  accelerator_count: 1
  # Other GPU options:
  # - NVIDIA_TESLA_V100 (more powerful, more expensive)
  # - NVIDIA_TESLA_P4
  # - NVIDIA_A100 (most powerful, most expensive)

  # Use preemptible instances to save ~70% (can be interrupted)
  # preemptible: true

# Docker build configuration
build:
  type: docker
  dockerfile_path: dockerfiles/train.dockerfile
  # Or use pre-built image from GCR:
  # type: docker-image
  # image: gcr.io/YOUR_PROJECT_ID/train:latest

# Environment variables
env:
  - WANDB_API_KEY: ${WANDB_API_KEY}  # Make sure this is set locally

# Storage mounts (if needed)
# volumes:
#   - name: data
#     mount_path: /data
#     gcs_bucket: your-bucket-name
