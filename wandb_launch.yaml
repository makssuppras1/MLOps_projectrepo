# WandB Launch Configuration for Cloud Training
# This allows you to run training on cloud compute (AWS, GCP, Azure)

# Resource configuration - choose one:
resource: aws-ec2  # Options: aws-ec2, gcp-gke, azure-aci, kubernetes, local

# AWS EC2 configuration
resource_args:
  instance_type: g4dn.xlarge  # GPU instance with NVIDIA T4
  # Alternative instance types:
  # - g4dn.2xlarge (more memory)
  # - p3.2xlarge (V100 GPU, more expensive)
  # - g5.xlarge (A10G GPU, newer)
  region: us-east-1
  # Optional: Use a Deep Learning AMI
  # ami_id: ami-xxxxx

  # Security group (create one that allows SSH)
  # security_group_ids: ["sg-xxxxx"]

  # Key pair for SSH access
  # key_name: your-key-pair-name

# Docker build configuration
build:
  type: docker
  dockerfile_path: dockerfiles/train.dockerfile
  # Or use a pre-built image:
  # type: docker-image
  # image: your-registry/train:latest

# Environment variables to pass
env:
  - WANDB_API_KEY: ${WANDB_API_KEY}  # Make sure this is set locally

# Mount volumes (if needed)
# volumes:
#   - /path/to/data:/data

# Override entrypoint if needed
# entrypoint: ["uv", "run", "src/pname/train.py"]
